{% extends "main.html" %}

{% block title %}{% if teacher_name %}Teacher availability: {{ teacher_name }}{% else %}Check teacher availability{% endif %}{% endblock %}
{% block content %}

{% load main %}

{% if teacher_name %}
<h1>{{ teacher_name }}: availability in {{ program.niceName }}</h1>
{% else %}
<h1>Check teacher availability</h1>
{% endif %}

{% if teacher_name %}
<p>Below is a list of all timeslots in this program. A legend:</p>
<ul>
	<li class="unavailable"><i class="glyphicon glyphicon-ban-circle"></i> The teacher is not available.</li>
	<li class="available"><i class="glyphicon glyphicon-asterisk"></i> The teacher is available.</li>
	<li class="teaching"><i class="glyphicon glyphicon-ok"></i> The teacher is available and scheduled to teach.</li>
	<li class="observing"><i class="glyphicon glyphicon-ok-circle"></i> The teacher is available and scheduled to observe.</li>
	<li class="teaching-unavailable"><i class="glyphicon glyphicon-alert"></i> The teacher is scheduled to teach, but not marked as available.</li>
	<li class="observing-unavailable"><i class="glyphicon glyphicon-exclamation-sign"></i> The teacher is scheduled to observe, but not marked as available.</li>
	<li class="conflict"><i class="glyphicon glyphicon-fire"></i> The teacher is scheduled to teach or observe more than one section.</li>
</ul>
<p><a href="{{ edit_path }}">Click here to edit teacher availability.</a></p>

<dl>
{% for t in timeslots %}
	{% if t.conflict %}
		<dt class="conflict"><i class="glyphicon glyphicon-fire"></i>
	{% elif t.available %}
		{% if t.teaching %}
			<dt class="teaching"><i class="glyphicon glyphicon-ok"></i>
		{% elif t.observing %}
			<dt class="observing"><i class="glyphicon glyphicon-ok-circle"></i>
		{% else %}
			<dt class="available"><i class="glyphicon glyphicon-asterisk"></i>
		{% endif %}
	{% else %} {# unavailable #}
		{% if t.teaching %}
			<dt class="teaching-unavailable"><i class="glyphicon glyphicon-alert"></i>
		{% elif t.observing %}
			<dt class="observing-unavailable"><i class="glyphicon glyphicon-exclamation-sign"></i>
		{% else %}
			<dt class="unavailable"><i class="glyphicon glyphicon-ban-circle"></i>
		{% endif %}
	{% endif %}
		{{ t.start }} to {{ t.end }}
	</dt>
	{% for sec in t.teaching %}
		<dd><a href="/manage/{{ program.getUrlBase }}/manageclass/{{ sec.class_id }}">{{ sec.emailcode }}: {{ sec.class_title }} ({{ sec.rooms }})</a></dd>
	{% endfor %}
	{% for sec in t.observing %}
		<dd>Observing <a href="/manage/{{ program.getUrlBase }}/manageclass/{{ sec.class_id }}">{{ sec.emailcode }}: {{ sec.class_title }} ({{ sec.rooms }})</a></dd>
	{% endfor %}
{% endfor %}
</dl>

<br /><br />

<dl>
	<dt>Unscheduled class sections {{ teacher_name }} is teaching</dt>
	{% for sec in unscheduled_teaching %}
		<dd><a href="/manage/{{ program.getUrlBase }}/manageclass/{{ sec.class_id }}">{{ sec.emailcode }}: {{ sec.class_title }} ({{ sec.duration }})</a></dd>
	{% endfor %}
	<dt>Unscheduled class sections {{ teacher_name }} is observing</dt>
	{% for sec in unscheduled_observing %}
		<dd><a href="/manage/{{ program.getUrlBase }}/manageclass/{{ sec.class_id }}">{{ sec.emailcode }}: {{ sec.class_title }} ({{ sec.duration }})</a></dd>
	{% endfor %}
</dl>

<br /><br />

{% endif %}{# teacher_name #}

<form method="POST" action="{{ request.path }}">
{{ form.as_p }}
<button type="submit" class="btn btn-primary"><i class="glyphicon glyphicon-search" aria-hidden="true"></i> Search</button>
</form>

{% include "program/modules/admincore/returnlink.html" %}

{% endblock %}
